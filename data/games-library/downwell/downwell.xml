<Game>
    <Name>Downwell</Name>
    <Thumbnail>Downwell_logo.png</Thumbnail>
    <Description>Explore the abyss</Description>
    <Entities>
        <!-- Welltaro -->
        <ImageEntity>
            <Name>Welltaro</Name>
            <Width>45</Width>
            <Height>45</Height>
            <Image>dw_main_character_idle_fall_right.png</Image>
            <VariableNames>FacingRight FacingLeft Firing</VariableNames>
            <VariableValues>downwell/dw_main_character_idle_fall_right.png downwell/dw_main_character_idle_fall_left.png downwell/dw_main_character_firing.png</VariableValues>
            <Behaviors>
                <!-- A Key Input -->
                <Behavior>
                    <InputCondition>
                        <Key>LeftKey2</Key>
                        <InputRequirement>Active</InputRequirement>
                        <InputRequirement>Pressed</InputRequirement>
                    </InputCondition>
                    <IndependentAction>
                        <Effect>VelocityInput -.1600 0 + .3200</Effect>
                        <Effect>SetImage FacingLeft</Effect>
                    </IndependentAction>
                </Behavior>
                <!-- D Key Input -->
                <Behavior>
                    <InputCondition>
                        <Key>RightKey2</Key>
                        <InputRequirement>Active</InputRequirement>
                        <InputRequirement>Pressed</InputRequirement>
                    </InputCondition>
                    <IndependentAction>
                        <Effect>VelocityInput .1600 0 + .3200</Effect>
                        <Effect>SetImage FacingRight</Effect>
                    </IndependentAction>
                </Behavior>
                <!-- W Key Input -->
                <Behavior>
                    <InputCondition>
                        <Key>UpKey2</Key>
                        <InputRequirement>Pressed</InputRequirement>
                    </InputCondition>
                    <IndependentAction>
                        <Effect>CreateEntityRelative BootBullet 11 25</Effect>
                        <Effect>CreateEntityRelative BootMuzzleFlash -3 25</Effect>
                        <Effect>SetImage Firing</Effect>
                        <Effect>SetVelocity 0 -0.01</Effect>
                    </IndependentAction>
                </Behavior>
                <!--Gravity Behavior-->
                <Behavior>
                    <IndependentAction>
                        <Effect>Gravity 0 0.05 + 20</Effect>
                    </IndependentAction>
                </Behavior>
                <!-- Run into a brick downward to stop falling.-->
                <Behavior>
                    <RequiredCollisionCondition>
                        <Entity1>SELF</Entity1>
                        <Entity2>universalTerrain</Entity2>
                        <Direction>Down</Direction>
                    </RequiredCollisionCondition>
                    <CollisionDeterminedAction>
                        <Args>universalTerrain Down</Args>
                        <Effect>TerrainCollisionDown</Effect>
                        <Effect>SetVariable Jumping False</Effect>
                    </CollisionDeterminedAction>
                </Behavior>
                <!--  Run into a brick Left to stop too-->
                <Behavior>
                    <RequiredCollisionCondition>
                        <Entity2>universalTerrain</Entity2>
                        <Direction>Left</Direction>
                    </RequiredCollisionCondition>
                    <CollisionDeterminedAction>
                        <Args>universalTerrain Left</Args>
                        <Effect>TerrainCollisionLeft</Effect>
                    </CollisionDeterminedAction>
                </Behavior>
                <!--  Run into a brick Right to stop too-->
                <Behavior>
                    <RequiredCollisionCondition>
                        <Entity2>universalTerrain</Entity2>
                        <Direction>Right</Direction>
                    </RequiredCollisionCondition>
                    <CollisionDeterminedAction>
                        <Args>universalTerrain Right</Args>
                        <Effect>TerrainCollisionRight</Effect>
                    </CollisionDeterminedAction>
                </Behavior>
                <!-- Run into left side of screen and die-->
                <Behavior>
                    <EntityVariableCondition>
                        <VariableName>XPos</VariableName>
                        <Comparison>LessThan</Comparison>
                        <RequiredValue>0</RequiredValue>
                    </EntityVariableCondition>
                    <IndependentAction>
                        <Effect>ChangeVariable Lives + -1.0</Effect>
                    </IndependentAction>
                </Behavior>
                <!-- Run into right side of screen and die-->
                <Behavior>
                    <EntityVariableCondition>
                        <VariableName>XPos</VariableName>
                        <Comparison>GreaterThan</Comparison>
                        <RequiredValue>955</RequiredValue> <!-- screen width (1000) minus width of Welltaro (45 at the moment) -->
                    </EntityVariableCondition>
                    <IndependentAction>
                        <Effect>ChangeVariable Lives + -1.0</Effect>
                    </IndependentAction>
                </Behavior>
                <!-- Fall below the lower camera border to lower the camera (Based on Cary's sonic.xml)-->
                <Behavior>
                    <!-- If Welltaro is below the lower y border-->
                    <EntityVariableCondition>
                        <VariableName>YPos</VariableName>
                        <Comparison>GreaterThan</Comparison>
                        <RequiredValue>CameraBorderYBottom</RequiredValue>
                    </EntityVariableCondition>
                    <IndependentAction>
                        <Effect>SetVariable CameraDiff YPos</Effect>                        <!-- Set CameraDiff to be Welltaro's current y pos ...-->
                        <Effect>ChangeVariable CameraDiff - CameraBorderYBottom</Effect>     <!-- ... minus the lower border ... -->
                        <Effect>ChangeVariable CameraDiff * -1</Effect>                     <!-- ... times -1-->
                        <Effect>ShiftCamera 0 CameraDiff</Effect>                           <!-- move the camera 'CameraDiff' distance in the y direction-->
                        <Effect>ChangeVariable CameraBorderYBottom - CameraDiff</Effect>     <!-- move the lower border right by the difference-->
                        <Effect>ChangeVariable CameraBorderYTop - CameraDiff</Effect>      <!-- move the upper border right by the difference-->
                    </IndependentAction>
                </Behavior>
                <!--   Resetting the Game and all the variables  when lives reaches 0-->
                <Behavior>
                    <GameVariableCondition>
                        <VariableName>Lives</VariableName>
                        <RequiredValue>0.0</RequiredValue>
                    </GameVariableCondition>
                    <IndependentAction>
                        <Effect>GoToLevel 1</Effect>
                        <Effect>SetVariable Lives 1.0</Effect>
                        <Effect>SetVariable Score 0.0</Effect>
                        <Effect>SetVariable CameraBorderYBottom 300</Effect>
                        <Effect>SetVariable CameraBorderYTop 100</Effect>
                    </IndependentAction>
                </Behavior>
            </Behaviors>
        </ImageEntity>
        <!-- Boot muzzle flash -->
        <ImageEntity>
            <Name>BootMuzzleFlash</Name>
            <Width>48</Width>
            <Height>48</Height>
            <Image>dw_boot_muzzle_flash.png</Image>
            <!-- immediately destroy self-->
            <Behavior>
                <IndependentAction>
                    <Effect>RemoveSelf</Effect>
                </IndependentAction>
            </Behavior>
        </ImageEntity>
        <!-- Boot projectiles -->
        <ImageEntity>
            <Name>BootBullet</Name>
            <Width>24</Width>
            <Height>54</Height>
            <Image>dw_boot_bullet.png</Image>
            <VariableNames>MyYOffset</VariableNames>
            <VariableValues>0</VariableValues>
            <!-- move downward when created-->
            <Behavior>
                <IndependentAction>
                    <Effect>SetVelocity 0 1</Effect>
                    <Effect>SetVariable MyYOffset YPos</Effect>
                    <Effect>ChangeVariable MyYOffset - CameraBorderYBottom</Effect>
                </IndependentAction>
            </Behavior>
            <!-- get destroyed when out of view-->
            <Behavior>
                <EntityVariableCondition>
                    <VariableName>MyYOffset</VariableName>
                    <Comparison>GreaterThan</Comparison>
                    <RequiredValue>500</RequiredValue>
                </EntityVariableCondition>
                <IndependentAction>
                    <Effect>RemoveSelf</Effect>
                </IndependentAction>
            </Behavior>
        </ImageEntity>
        <!-- Background -->
        <ImageEntity>
            <Name>Background</Name>
            <Width>1000</Width>
            <Height>800</Height>
            <Image>downwellBackground.png</Image>
            <Stationary>true</Stationary>
        </ImageEntity>
        <!-- Platform Tile -->
        <ImageEntity>
            <Name>PlatformTile</Name>
            <Width>57</Width>
            <Height>57</Height>
            <Image>dw_platform_tile_side_up.png</Image>
            <VariableNames>TerrainID</VariableNames>
            <VariableValues>universalTerrain</VariableValues>
        </ImageEntity>
        <!-- Cave Wall Left Tiles -->
        <ImageEntity>
            <Name>CaveTileLeft</Name>
            <Width>60</Width>
            <Height>60</Height>
            <Image>dw_cave_wall_left.png</Image>
            <VariableNames>TerrainID</VariableNames>
            <VariableValues>universalTerrain</VariableValues>
        </ImageEntity>
        <!-- Cave Wall Right Tiles -->
        <ImageEntity>
            <Name>CaveTileRight</Name>
            <Width>60</Width>
            <Height>60</Height>
            <Image>dw_cave_wall_right.png</Image>
            <VariableNames>TerrainID</VariableNames>
            <VariableValues>universalTerrain</VariableValues>
        </ImageEntity>
    </Entities>
    <Variables>
        <!-- Score behavior  -->
        <Variable>
            <Name>Score</Name>
            <StartValue>0</StartValue>
        </Variable>
        <!-- Lives behavior  -->
        <Variable>
            <Name>Lives</Name>
            <StartValue>1</StartValue>
        </Variable>
        <!-- Camera Difference Variable    -->
        <Variable>
            <Name>CameraDiff</Name>
            <StartValue>0</StartValue>
        </Variable>
        <!-- Camera Top Border Variable    -->
        <Variable>
            <Name>CameraBorderYTop</Name>
            <StartValue>100</StartValue>
        </Variable>
        <!-- Camera Top Border Variable    -->
        <Variable>
            <Name>CameraBorderYBottom</Name>
            <StartValue>300</StartValue>
        </Variable>
    </Variables>
    <Levels>
        <Level>
            <ID>1</ID>
            <NextLevel>1</NextLevel>
            <TextEntityInstances>
                <TextEntityInstance>
                    <Text>Score: %.0f</Text>
                    <Font>Times New Roman</Font>
                    <XPos>700</XPos>
                    <YPos>0</YPos>
                    <Width>150</Width>
                    <Height>50</Height>
                    <Stationary>true</Stationary>
                    <PropertyVariableDependency>
                        <VariableName>Score</VariableName>
                        <PropertyName>Text</PropertyName>
                    </PropertyVariableDependency>
                </TextEntityInstance>
            </TextEntityInstances>
            <ImageEntityInstances>
                <!--Background-->
                <ImageEntityInstance>
                    <Name>Background</Name>
                    <XPos>0</XPos>
                    <YPos>0</YPos>
                </ImageEntityInstance>
                <!--welltaro-->
                <ImageEntityInstance>
                    <Name>Welltaro</Name>
                    <XPos>500</XPos>
                    <YPos>100</YPos>
                    <VariableNames>RespawnXLocation RespawnYLocation</VariableNames>
                    <VariableValues>0 0</VariableValues>
                </ImageEntityInstance>
                <!--blocks-->
                <ImageEntityInstance>
                    <Name>PlatformTile</Name>
                    <XPos>500</XPos>
                    <YPos>200</YPos>
                    <Rows>40</Rows>
                    <YGap>200</YGap>
                </ImageEntityInstance>
                <!--cave walls-->
                <ImageEntityInstance>
                    <Name>CaveTileLeft</Name>
                    <XPos>100</XPos>
                    <YPos>100</YPos>
                    <Rows>20</Rows>
                </ImageEntityInstance>
                <ImageEntityInstance>
                    <Name>CaveTileRight</Name>
                    <XPos>840</XPos>
                    <YPos>100</YPos>
                    <Rows>20</Rows>
                </ImageEntityInstance>
            </ImageEntityInstances>
        </Level>
    </Levels>
</Game>